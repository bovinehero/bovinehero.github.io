---
layout: post
title:  "/Documents/dojo0.2_enumeration"
name: dojo0.2_enumeration.md
author: bhero
time: "01:08"
description: "Setting up a VirtualBox Lab"
categories: Red_Team_Dojos0
---

# Read Team Dojos 0: Recon Phase

In this Dojo we are going to look at enumerating the Bad Store VM we configured in the [previous tutorial](dojo0.1-Lab-Setup.html). In order to better understand the process we will be using a series of command line tools as well as our browser to see what we can discover about our target.

> Remember don't do this stuff on systems unless you own them or have written permission to engage!

## Pre-engagement

It is important to define scope for an assessment, otherwise you can go too far and risk damage to the target and potentially cause an outage, which costs your client money and can potentially lead to criminal prosecution. Therefore in the real world we would definitley request a scope of work as well as a clearly defined area to operate. However as I own this instance I can do with it as I please. Over the next few posts I'm going to simulate a full on black box impact assessment on Bad Store. This means I am going to attempt to get full root access on the system, as root I have full control of the victim and can be considered to have demonstrated full comprimise on the box.

Because we know the IP address (192.168.56.101) there is no need for network recon, at this stage we know where our target will be, thus we can get on with the assessment. 

## Recon 

After a bit of poking around on the site, we can see that BadStore is a webserver hosting an online store that sells all kinds of magical items. Typically we would dig a little deeper into the functions of the site for a quick win, but in the interests of learning some tools were going to dive straight into assertive (active) testing mode.

First we want to paint a picture of what services are running on the victim. To do this we perform a port scan on the target. At this point most people break out nmap. Now nmap is great, it is the swiss army knife of tools at this stage and we are going to get to it in a bit but nmap is a tactical solution and can be a little slow. What I like to do in circumstances like this is use nc (netcat) to give me a quick smash and grab of the open ports on the target. This is noisy and can DOS weaker boxes, but I gave my VM 2GB of RAM, I'm confident it can handle it.

We want to determine what ports are open using nc:

```bash
# zero-I/O mode with some verbosity, ip adress, port range
nc -zv 192.168.56.101 1-65535
```
after a few of seconds we get:
```
192.168.56.101: inverse host lookup failed: Unknown host
(UNKNOWN) [192.168.56.101] 3306 (mysql) open
(UNKNOWN) [192.168.56.101] 443 (https) open
(UNKNOWN) [192.168.56.101] 80 (http) open
```

now to get the same scan results with nmap (I'm a non root user):
```
sudo nmap 192.168.56.101 -p-
```
gives us
```
Starting Nmap 7.70 ( https://nmap.org ) at 2019-06-11 21:33 BST
Nmap scan report for 192.168.56.101
Host is up (0.00026s latency).
Not shown: 65532 closed ports
PORT     STATE SERVICE
80/tcp   open  http
443/tcp  open  https
3306/tcp open  mysql
MAC Address: 08:00:27:0D:44:1B (Oracle VirtualBox virtual NIC)

Nmap done: 1 IP address (1 host up) scanned in 2.32 seconds
```